/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./textbox/FloatLabel","./textbox/Input","./Validity","./InputComponent","./common/util/cxBuilder","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./textbox/FloatLabel"),require("./textbox/Input"),require("./Validity"),require("./InputComponent"),require("./common/util/cxBuilder"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.FloatLabel,e.Input,e.Validity,e.InputComponent,e.cxBuilder,e.babelHelpers),e.TextBox=r.exports}}(this,function(exports,e,t,r,o,i,n,a,s){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var l=s.interopRequireDefault(e),u=s.interopRequireDefault(t),p=s.interopRequireDefault(r),c=s.interopRequireDefault(o),d=s.interopRequireDefault(i),f=s.interopRequireDefault(n),h=a.create("TextBox"),m=function(e){function t(r,o){s.classCallCheck(this,t);var i=s.possibleConstructorReturn(this,e.call(this,r,o)),n=i.state.value;return i.state=s["extends"]({},i.state,{isFloating:!!n,isFocus:!1}),i.onFocus=i.onFocus.bind(i),i.onBlur=i.onBlur.bind(i),i.onChange=i.onChange.bind(i),i}return s.inherits(t,e),t.prototype.componentWillReceiveProps=function(t){var r=t.value;if(t.multiline&&this.state.value!==r)this.syncTextareaHeight();var o=this.state,i=o.isFloating,n=o.isFocus,a=!!r||n;if(i!==a)this.setState({isFloating:a});e.prototype.componentWillReceiveProps.call(this,t)},t.prototype.onFocus=function r(e){this.setState({isFocus:!0,isFloating:!0});var r=this.props.onFocus;if(r)return void r({type:"focus",target:this});if(this.needValidate("focus"))this.validate(this.state.value)},t.prototype.onBlur=function o(e){var t=e.target.value;this.setState({isFloating:!!t,isFocus:!1});var o=this.props.onBlur;if(o)return void o({type:"blur",target:this});if(this.setState({value:t}),this.needValidate("blur"))this.validate(t)},t.prototype.onChange=function(t){e.prototype.onChange.call(this,{type:"change",target:this,value:t.target.value})},t.prototype.syncTextareaHeight=function(){var e=this.input;if(e)e.style.height="auto",e.style.height=e.scrollHeight+"px"},t.prototype.needValidate=function(e){return-1!==this.props.validateEvents.indexOf(e)},t.prototype.renderFloatingLabel=function(e,t,r){if(!e)return null;else return l["default"].createElement(p["default"],{floating:t||r,focused:r,label:e})},t.prototype.render=function(){var e=this,t=this.onFocus,r=this.onBlur,o=this.onChange,i=this.props,n=i.floatingLabel,a=(i.className,i.value),p=s.objectWithoutProperties(i,["floatingLabel","className","value"]),f=this.state,m=f.validity,y=f.isFocus,b=f.isFloating,v=h(i).addStates({focus:y,floating:b,fulfilled:!!a}).addStates(this.getStyleStates()).build();return l["default"].createElement("div",{className:v},this.renderFloatingLabel(n,b,y),l["default"].createElement(c["default"],s["extends"]({},p,{onFocus:t,onBlur:r,onChange:o,isFocus:y,value:a,ref:function(t){if(t)e.input=u["default"].findDOMNode(t)}})),l["default"].createElement(d["default"],{validity:m}))},t}(f["default"]);exports["default"]=m,m.displayName="TextBox",m.defaultProps=s["extends"]({},f["default"].defaultProps,{validateEvents:["change","blur"]}),m.propTypes=s["extends"]({},f["default"].propTypes,{type:e.PropTypes.oneOf(["text","password"]),placeholder:e.PropTypes.string,floatingLabel:e.PropTypes.string,multiline:e.PropTypes.bool,onFocus:e.PropTypes.func,onBlur:e.PropTypes.func})});