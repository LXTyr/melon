/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./RippleCircle","../common/util/dom","../common/util/cxBuilder","react-motion","../babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./RippleCircle"),require("../common/util/dom"),require("../common/util/cxBuilder"),require("react-motion"),require("../babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.RippleCircle,e.dom,e.cxBuilder,e.reactMotion,e.babelHelpers),e.TouchRipple=r.exports}}(this,function(exports,e,t,r,n,i,o,a){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=a.interopRequireDefault(e),l=a.interopRequireDefault(t),u=a.interopRequireDefault(r),p=a.interopRequireDefault(n),c=i.create("TouchRipple"),d=function(e){function t(r){a.classCallCheck(this,t);var n=a.possibleConstructorReturn(this,e.call(this,r));return n.state={now:"t0",center:[0,0]},n.onMouseDown=n.onMouseDown.bind(n),n.willLeave=n.willLeave.bind(n),n}return a.inherits(t,e),t.prototype.onMouseDown=function(e){var t=e.pageX,r=e.pageY,n=this.position,i=n.top,o=n.left;this.setState({center:[t-o-this.radius,r-i-this.radius],now:"t"+(new Date).getTime()})},t.prototype.componentDidMount=function(){this.updatePosition()},t.prototype.componentDidUpdate=function(){this.updatePosition()},t.prototype.componentWillUnmount=function(){this.position=this.radius=null},t.prototype.updatePosition=function(){var e=l["default"].findDOMNode(this);this.position=p["default"].getPosition(e),this.radius=Math.max(this.position.width,this.position.height)/2},t.prototype.willLeave=function(e,t){return a["extends"]({},t,{opacity:o.spring(0,{stiffness:60,damping:15}),scale:o.spring(2,{stiffness:60,damping:15})})},t.prototype.render=function(){var e=this,t=this.state,r=t.center,n=r[0],i=r[1],a=t.now,l=[{key:a,style:{opacity:o.spring(this.props.opacity),scale:o.spring(0)}}],p=c().part("circle").build();return s["default"].createElement(o.TransitionMotion,{willLeave:this.willLeave,styles:l},function(t){return s["default"].createElement("div",{onMouseDown:e.onMouseDown,className:c(e.props).build()},t.map(function(t){var r=t.style,o=r.opacity,a=r.scale;return s["default"].createElement(u["default"],{key:t.key,className:p,opacity:o,scale:a,style:{width:2*e.radius||0,height:2*e.radius||0,left:n,top:i}})}))})},t}(e.Component);exports["default"]=d,d.defaultProps={opacity:.3},d.propTypes={opacity:e.PropTypes.number}});