/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","./InputComponent","./common/util/cxBuilder","./Icon","./Confirm","./calendar/Panel","./common/util/date","./Validity","./common/util/syncPropsToState","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("./InputComponent"),require("./common/util/cxBuilder"),require("./Icon"),require("./Confirm"),require("./calendar/Panel"),require("./common/util/date"),require("./Validity"),require("./common/util/syncPropsToState"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.InputComponent,e.cxBuilder,e.Icon,e.Confirm,e.Panel,e.date,e.Validity,e.syncPropsToState,e.babelHelpers),e.Calendar=r.exports}}(this,function(exports,e,t,r,n,i,o,a,s,l,u){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var p=u.interopRequireDefault(e),d=u.interopRequireDefault(t),c=u.interopRequireDefault(n),f=u.interopRequireDefault(i),h=u.interopRequireDefault(o),m=u.interopRequireWildcard(a),y=u.interopRequireDefault(s),b=r.create("Calendar"),v=function(e){function t(r,n){u.classCallCheck(this,t);var i=u.possibleConstructorReturn(this,e.call(this,r,n)),o=i.state.value;return i.onLabelClick=i.onLabelClick.bind(i),i.onConfirm=i.onConfirm.bind(i),i.onLabelClick=i.onLabelClick.bind(i),i.onCancel=i.onCancel.bind(i),i.onDateChange=i.onDateChange.bind(i),i.state=u["extends"]({},i.state,{date:o?i.parseDate(o):new Date,open:!1}),i}return u.inherits(t,e),t.prototype.getSyncUpdates=function(e){var t=e.disabled,r=e.customValidity,n=e.value,i=n?this.parseValue(n):null;i=!i||isNaN(i.getTime())?new Date:i;var o=l.getNextValidity(this,{value:n,disabled:t,customValidity:r});return{date:i,vilidity:o,value:this.stringifyValue(i)}},t.prototype.parseValue=function(e){return this.parseDate(e)},t.prototype.stringifyValue=function(e){if(!m.isDate(e))return e;var t=this.props,r=t.dateFormat,n=t.lang;return m.format(e,r.toLowerCase(),n)},t.prototype.parseDate=function(e){if("string"!=typeof e)return e;var t=this.props.dateFormat.toLowerCase();return m.parse(e,t)},t.prototype.getValue=function(){return this.stringifyValue(this.state.value)},t.prototype.onLabelClick=function(){var e=this.props,t=e.disabled,r=e.readOnly;if(!t&&!r)this.setState({open:!0})},t.prototype.onConfirm=function(){var t=this,r=this.state,n=r.value,i=r.date;if(n=this.parseDate(n),m.isEqualDate(i,this.parseDate(n)))return void this.setState({open:!1});else return void this.setState({open:!1},function(){e.prototype.onChange.call(t,{type:"change",target:t,value:t.stringifyValue(i)})})},t.prototype.onCancel=function(){this.setState({open:!1})},t.prototype.onDateChange=function(e){var t=this,r=e.value,n=this.props.autoConfirm;this.setState({date:this.parseDate(r)},n?function(){return t.onConfirm()}:null)},t.prototype.render=function(){var e=this.state,t=this.props,r=t.lang,n=t.disabled,i=t.size,o=t.name,a=t.dateFormat,s=t.placeholder,l=u.objectWithoutProperties(t,["lang","disabled","size","name","dateFormat","placeholder"]),d=e.value,v=e.validity,x=t.begin,g=t.end;x=x?this.parseDate(x):null,g=g?this.parseDate(g):null;var C=e.open,q=e.date,P=b(t).addStates({focus:C}).addStates(this.getStyleStates()).build();return p["default"].createElement("div",u["extends"]({},l,{className:P}),p["default"].createElement("input",{name:o,ref:"input",type:"hidden",value:d,disabled:n,size:i}),p["default"].createElement("label",{onClick:this.onLabelClick},d?m.format(this.parseDate(d),a.toLowerCase(),r):p["default"].createElement("span",{className:b().part("label-placeholder").build()},s),p["default"].createElement(c["default"],{icon:"expand-more"})),p["default"].createElement(y["default"],{validity:v}),p["default"].createElement(f["default"],{open:C,variants:["calendar"],onConfirm:this.onConfirm,onCancel:this.onCancel,size:i,buttonVariants:["secondery","calendar"]},p["default"].createElement(h["default"],{date:q,begin:x,end:g,lang:r,onChange:this.onDateChange})))},t}(d["default"]);exports["default"]=v,v.displayName="Calendar",v.LANG={week:"周",days:"日,一,二,三,四,五,六"},v.defaultProps=u["extends"]({},d["default"].defaultProps,{defaultValue:"",dateFormat:"yyyy-MM-dd",lang:v.LANG,placeholder:"请选择"}),v.propTypes=u["extends"]({},d["default"].propTypes,{value:e.PropTypes.string,autoConfirm:e.PropTypes.bool,dateFormat:e.PropTypes.string,end:e.PropTypes.oneOfType([e.PropTypes.object,e.PropTypes.string]),begin:e.PropTypes.oneOfType([e.PropTypes.object,e.PropTypes.string]),lang:e.PropTypes.shape({week:e.PropTypes.string,days:e.PropTypes.string})})});