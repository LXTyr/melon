/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","./Validator","./common/util/syncPropsToState","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("./Validator"),require("./common/util/syncPropsToState"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.Validator,e.syncPropsToState,e.babelHelpers),e.InputComponent=r.exports}}(this,function(exports,e,t,r,i){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=i.interopRequireDefault(t),n=i.interopRequireDefault(r),a=function(e){function t(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i.classCallCheck(this,t);var a=i.possibleConstructorReturn(this,e.call(this,r)),s=r.name,l=r.value,u=r.defaultValue;a.validator=r.validator||n.validator||o["default"];var p=n.pointer;return a.pointer=null!=s&&p?""+p+s:null,a.state={value:null!=l?l:u},a}return i.inherits(t,e),t.prototype.getChildContext=function(){var e=this.pointer;return{pointer:e?e+"/":null}},t.prototype.componentDidMount=function(){var e=this.context.attachForm;if(e)e(this)},t.prototype.componentWillReceiveProps=function(e){var t=this.getSyncUpdates(e);if(t)this.setState(t)},t.prototype.getSyncUpdates=function(e){return n["default"](this,e)},t.prototype.componentWillUnmount=function(){var e=this.context.detachForm;if(e)e(this)},t.prototype.validate=function(e){var t=this.checkValidity(e);return this.setState({validity:t}),t},t.prototype.checkValidity=function(e){return this.validator.validate(e,this)},t.prototype.onChange=function r(e){var t=this.props,r=t.onChange,i=t.customValidity;if(r)return void r(e);var o=e.value;if(o!==this.state.value){var n=i?this.validator.createCustomValidity(i):this.checkValidity(o);this.setState({value:o,validity:n})}},t.prototype.isDisabled=function(){return this.props.disabled},t.prototype.isReadOnly=function(){return this.props.readOnly},t.prototype.getValue=function(){return this.state.value},t.prototype.getStyleStates=function(){var e=this.state.validity;if(!e)return null;var t=e.isValid();return{valid:t,invalid:!t,"read-only":this.isReadOnly()}},t}(e.Component);exports["default"]=a,a.displayName="InputComponent",a.propTypes={name:e.PropTypes.string,readOnly:e.PropTypes.bool,pointer:e.PropTypes.string,custormValidity:e.PropTypes.string,onChange:e.PropTypes.func,validate:e.PropTypes.func,renderErrorMessage:e.PropTypes.func,validator:e.PropTypes.shape({validate:e.PropTypes.func.isRequired})},a.defaultProps={defaultValue:"",readOnly:!1,validateEvents:["change"]},a.contextTypes={pointer:e.PropTypes.string,validator:e.PropTypes.shape({validate:e.PropTypes.func.isRequired}),attachForm:e.PropTypes.func,detachForm:e.PropTypes.func},a.childContextTypes={pointer:e.PropTypes.string}});