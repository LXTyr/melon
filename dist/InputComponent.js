/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","./Validator","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("./Validator"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.Validator,e.babelHelpers),e.InputComponent=r.exports}}(this,function(exports,e,t,r){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=r.interopRequireDefault(t),o=function(e){function t(o){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r.classCallCheck(this,t);var a=r.possibleConstructorReturn(this,e.call(this,o)),s=o.name,l=o.value,u=o.defaultValue;a.validator=o.validator||n.validator||i["default"];var p=n.pointer;return a.pointer=null!=s&&p?""+p+s:null,a.state={value:null!=l?l:u},a}return r.inherits(t,e),t.prototype.getChildContext=function(){var e=this.pointer;return{pointer:e?e+"/":null}},t.prototype.componentDidMount=function(){var e=this.context.attachForm;if(e)e(this)},t.prototype.componentWillReceiveProps=function(e){var t=e.customValidity,r=e.defaultValue,i=e.value,o=void 0===i?r:i,n=t?this.validator.createCustomValidity(t):this.checkValidity(o);if(o!==this.state.value||t!==this.props.customValidity)this.setState({value:o,validity:n})},t.prototype.componentWillUnmount=function(){var e=this.context.detachForm;if(e)e(this)},t.prototype.validate=function(e){var t=this.checkValidity(e);return this.setState({validity:t}),t},t.prototype.checkValidity=function(e){return this.validator.validate(e,this)},t.prototype.onChange=function o(e){var t=this.props,o=t.onChange,r=t.customValidity;if(o)return void o(e);var i=e.value;if(i!==this.state.value){var n=r?this.validator.createCustomValidity(r):this.checkValidity(i);this.setState({value:i,validity:n})}},t.prototype.isDisabled=function(){return this.props.disabled},t.prototype.isReadOnly=function(){return this.props.readOnly},t.prototype.getValue=function(){return this.state.value},t.prototype.getStyleStates=function(){var e=this.state.validity;if(!e)return null;var t=e.isValid();return{valid:t,invalid:!t,"read-only":this.isReadOnly()}},t}(e.Component);exports["default"]=o,o.displayName="InputComponent",o.propTypes={name:e.PropTypes.string,readOnly:e.PropTypes.bool,pointer:e.PropTypes.string,custormValidity:e.PropTypes.string,onChange:e.PropTypes.func,validate:e.PropTypes.func,renderErrorMessage:e.PropTypes.func,validator:e.PropTypes.shape({validate:e.PropTypes.func.isRequired})},o.defaultProps={defaultValue:"",readOnly:!1,validateEvents:["change"]},o.contextTypes={pointer:e.PropTypes.string,validator:e.PropTypes.shape({validate:e.PropTypes.func.isRequired}),attachForm:e.PropTypes.func,detachForm:e.PropTypes.func},o.childContextTypes={pointer:e.PropTypes.string}});