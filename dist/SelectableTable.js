/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","./Table","./table/SelectorColumn","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("./Table"),require("./table/SelectorColumn"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.Table,e.SelectorColumn,e.babelHelpers),e.SelectableTable=r.exports}}(this,function(exports,e,t,r,i){"use strict";function o(e,t,r,i,o){if(!e)return[o];if("selectAll"===i)return t.map(function(e,t){return t});if("unselectAll"===i)return[];var n="select"===i?r.concat(o).sort():r.filter(function(e){return e!==o});return n}Object.defineProperty(exports,"__esModule",{value:!0});var n=i.interopRequireDefault(e),a=i.interopRequireDefault(t),l=i.interopRequireDefault(r),s=function(e){function t(r){i.classCallCheck(this,t);var o=i.possibleConstructorReturn(this,e.call(this,r));return o.getSelected=o.getSelected.bind(o),o.isAllRowsSelected=o.isAllRowsSelected.bind(o),o.isRowSelected=o.isRowSelected.bind(o),o.onSelect=o.onSelect.bind(o),o.onSelectAll=o.onSelectAll.bind(o),o.state={selected:o.props.selected},o}return i.inherits(t,e),t.prototype.componentWillReceiveProps=function(e){if(!this.props.onSelect)this.setState({selected:e.selected})},t.prototype.onSelect=function(e){this.onRowSelectorClick(this.isRowSelected(e)?"unselect":"select",e)},t.prototype.onSelectAll=function(){this.onRowSelectorClick(this.isAllRowsSelected()?"unselectAll":"selectAll")},t.prototype.onRowSelectorClick=function(e,t){var r=this.props,i=r.onSelect,n=r.dataSource,a=r.multiple,l=this.getSelected();if(l=o(a,n,l,e,t),i)return void i({selected:l,target:this});else return void this.setState({selected:l})},t.prototype.getSelected=function(){var e=this.state,t=this.props,r=t.onSelect,i=r?t:e,o=i.selected;return o},t.prototype.isRowSelected=function(e){var t=this.getSelected();return-1!==t.indexOf(e)},t.prototype.isAllRowsSelected=function(){var e=this.getSelected();return e.length===this.props.dataSource.length},t.prototype.render=function(){var e=this.props,t=e.children,r=e.multiple,o=i.objectWithoutProperties(e,["children","multiple"]);return n["default"].createElement(a["default"],o,n["default"].createElement(l["default"],{isSelected:this.isRowSelected,isAllSelected:this.isAllRowsSelected,multiple:r,onSelect:this.onSelect,onSelectAll:this.onSelectAll}),t)},t}(e.Component);exports["default"]=s,s.displayName="SelectableTable",s.propTypes=i["extends"]({},a["default"].propTypes,{multiple:e.PropTypes.bool.isRequired,onSelect:e.PropTypes.func,selected:e.PropTypes.arrayOf(e.PropTypes.number).isRequired}),s.defaultProps=i["extends"]({},a["default"].defaultProps,{multiple:!0,selected:[]})});