/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./Mask","./common/util/dom","./dialog/DialogWindow","./common/util/cxBuilder","react-motion","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./Mask"),require("./common/util/dom"),require("./dialog/DialogWindow"),require("./common/util/cxBuilder"),require("react-motion"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.Mask,e.dom,e.DialogWindow,e.cxBuilder,e.reactMotion,e.babelHelpers),e.Dialog=r.exports}}(this,function(exports,e,t,r,o,n,i,a,s){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var l=s.interopRequireDefault(e),u=s.interopRequireDefault(t),p=s.interopRequireDefault(r),c=s.interopRequireDefault(o),d=s.interopRequireDefault(n),f=i.create("Dialog"),h=function(e){function t(r){s.classCallCheck(this,t);var o=s.possibleConstructorReturn(this,e.call(this,r));return o.originalHTMLBodySize={},o.state={open:o.props.open},o.onShow=o.onShow.bind(o),o.onHide=o.onHide.bind(o),o.onMaskClick=o.onMaskClick.bind(o),o}return s.inherits(t,e),t.prototype.componentDidMount=function(){this.positionDialog()},t.prototype.componentWillUpdate=function(){this.positionDialog()},t.prototype.componentWillReceiveProps=function(e){var t=e.open;if(t!==this.state.open)this.setState({open:t},t?this.onShow:this.onHide)},t.prototype.positionDialog=function(){var e=u["default"].findDOMNode(this.dialogWindow),t=-e.offsetHeight/2,r=c["default"].getClientHeight();t=e.offsetHeight>r?-r/2+16:t,e.style.marginLeft=-e.offsetWidth/2+"px",e.style.marginTop=t+"px"},t.prototype.onMaskClick=function(e){if(this.props.maskClickClose)this.setState({open:!1},this.onHide);else e.stopPropagation()},t.prototype.onShow=function r(){var r=this.props.onShow;if(r)r()},t.prototype.onHide=function o(){var o=this.props.onHide;if(o)o()},t.prototype.renderTitle=function(){var e=this.props.title;return e?l["default"].createElement("h1",{className:f().part("title").build()},e):null},t.prototype.renderAction=function(){var e=this.props.actions;return e?l["default"].createElement("div",{ref:"dialogActions",className:f().part("actions").build()},e):null},t.prototype.render=function(){var e=this,t=this.props,r=this.state,o=t.children,n=s.objectWithoutProperties(t,["children"]),i=r.open,u=this.renderTitle(),c=l["default"].createElement("div",{className:f().part("body").build()},o),h=this.renderAction(),m=f().part("window").build();return l["default"].createElement("div",s["extends"]({},n,{className:f(t).addStates({open:i}).build()}),l["default"].createElement(a.Motion,{style:{y:a.spring(i?0:-80)}},function(t){var r=t.y;return l["default"].createElement(d["default"],{top:Math.round(r),ref:function(t){e.dialogWindow=t},title:u,footer:h,className:m},c)}),l["default"].createElement(p["default"],{show:i,lockScrollingOnShow:!0,onClick:this.onMaskClick}))},t}(e.Component);exports["default"]=h,h.propTypes={actions:e.PropTypes.node,maskClickClose:e.PropTypes.bool,open:e.PropTypes.bool,onHide:e.PropTypes.func,onShow:e.PropTypes.func,title:e.PropTypes.oneOfType([e.PropTypes.string,e.PropTypes.element])},h.defaultProps={maskClickClose:!0,open:!1}});