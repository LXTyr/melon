/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./Button","./common/util/dom","./common/util/cxBuilder","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./Button"),require("./common/util/dom"),require("./common/util/cxBuilder"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.Button,e.dom,e.cxBuilder,e.babelHelpers),e.SnackBar=r.exports}}(this,function(exports,e,t,r,i,o,n){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=n.interopRequireDefault(e),s=n.interopRequireDefault(t),l=n.interopRequireDefault(r),u=n.interopRequireWildcard(i),p=o.create("SnackBar"),c=function(e){function t(r){n.classCallCheck(this,t);var i=n.possibleConstructorReturn(this,e.call(this,r));return i.autoHideTimer=null,i.onMouseUp=i.onMouseUp.bind(i),i.onHide=i.onHide.bind(i),i.state={open:i.props.open},i}return n.inherits(t,e),t.prototype.componentDidMount=function(){if(u.on(document.body,"mouseup",this.onMouseUp),this.props.openOnMount)this.onShow();this.locate()},t.prototype.componentWillReceiveProps=function(e){var t=e.open;if(t!==this.state.open)t?this.onShow():this.onHide()},t.prototype.componentDidUpdate=function(){this.locate()},t.prototype.componentWillUnmount=function(){if(u.off(document.body,"mouseup",this.onMouseUp),this.autoHideTimer)clearTimeout(this.autoHideTimer)},t.prototype.locate=function(){var e=this.props.direction,t=this.state.open,r=s["default"].findDOMNode(this);if(!t)switch(e){case"bc":case"tc":r.style.marginTop="",r.style.marginLeft=-r.offsetWidth/2+"px";break;case"lc":case"rc":r.style.marginLeft="",r.style.marginTop=-r.offsetHeight/2+"px"}},t.prototype.onHide=function r(){var r=this.props.onHide;this.setState({open:!1},function(){if(r)r()})},t.prototype.onShow=function i(){var e=this.props,i=e.onShow,t=e.autoHideDuration;this.setState({open:!0},function(){var e=this;if(i)i();if(t>0)this.autoHideTimer=setTimeout(function(){e.onHide()},t)})},t.prototype.onMouseUp=function(e){if(this.state.open){e=e||window.event;var t=e.target||e.srcElement,r=s["default"].findDOMNode(this);if(r!==t&&!u.contains(r,t))return void this.onHide();else return void 0}},t.prototype.render=function(){var e=this.props,t=e.message,r=e.action,i=e.direction,o=this.state.open,n=p(this.props).addStates({open:o}).addVariants("direction-"+i).build();return a["default"].createElement("div",{className:n},a["default"].createElement("span",{className:p().part("message").build()},t),a["default"].createElement(l["default"],{variants:["snackbar"],className:p().part("action").build(),onClick:this.onHide},r))},t}(e.Component);exports["default"]=c,c.displayName="SnackBar",c.defaultProps={autoHideDuration:0,action:"关闭",direction:"bl"},c.propTypes={action:e.PropTypes.string,autoHideDuration:e.PropTypes.number,message:e.PropTypes.node.isRequired,openOnMount:e.PropTypes.bool,onHide:e.PropTypes.func,onShow:e.PropTypes.func,direction:e.PropTypes.oneOf(["tr","rt","rb","br","bl","lb","lt","tl","tc","rc","bc","lc"])},c.show=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"bl":arguments[2],i=document,o=i.body,n=i.createElement("div");o.appendChild(n);var l=a["default"].createElement(c,{autoHideDuration:t,message:e,direction:r,onHide:function(){setTimeout(function(){if(n)s["default"].unmountComponentAtNode(n),o.removeChild(n),o=i=n=l=null},400)}});return s["default"].render(l,n,function(){l=a["default"].cloneElement(l,{open:!0}),setTimeout(function(){s["default"].render(l,n)},0)}),l}});