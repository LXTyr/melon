/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./Button","./common/util/dom","./common/util/cxBuilder","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./Button"),require("./common/util/dom"),require("./common/util/cxBuilder"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.Button,e.dom,e.cxBuilder,e.babelHelpers),e.SnackBar=r.exports}}(this,function(exports,e,t,r,o,i,n){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=n.interopRequireDefault(e),s=n.interopRequireDefault(t),l=n.interopRequireDefault(r),p=n.interopRequireWildcard(o),u=i.create("SnackBar"),d=function(e){function t(r){n.classCallCheck(this,t);var o=n.possibleConstructorReturn(this,e.call(this,r));return o.autoHideTimer=null,o.onMouseUp=o.onMouseUp.bind(o),o.onHide=o.onHide.bind(o),o.state={open:o.props.open},o}return n.inherits(t,e),t.prototype.componentDidMount=function(){if(p.on(document.body,"mouseup",this.onMouseUp),this.props.openOnMount)this.onShow();this.locate()},t.prototype.componentWillReceiveProps=function(e){var t=e.open;if(t!==this.state.open)t?this.onShow():this.onHide()},t.prototype.componentDidUpdate=function(){this.locate()},t.prototype.componentWillUnmount=function(){if(p.off(document.body,"mouseup",this.onMouseUp),this.autoHideTimer)clearTimeout(this.autoHideTimer)},t.prototype.locate=function(){var e=this.props.direction,t=this.state.open,r=s["default"].findDOMNode(this);if(!t)switch(e){case"bc":case"tc":r.style.marginTop="",r.style.marginLeft=-r.offsetWidth/2+"px";break;case"lc":case"rc":r.style.marginLeft="",r.style.marginTop=-r.offsetHeight/2+"px"}},t.prototype.onHide=function r(){var r=this.props.onHide;this.setState({open:!1},function(){if(r)r()})},t.prototype.onShow=function o(){var e=this.props,o=e.onShow,t=e.autoHideDuration;this.setState({open:!0},function(){var e=this;if(o)o();if(t>0)this.autoHideTimer=setTimeout(function(){e.onHide()},t)})},t.prototype.onMouseUp=function(e){if(this.state.open){e=e||window.event;var t=e.target||e.srcElement,r=s["default"].findDOMNode(this);if(r!==t&&!p.contains(r,t))return void this.onHide();else return void 0}},t.prototype.render=function(){var e=this.props,t=e.message,r=e.action,o=e.direction,i=this.state.open,n=u(this.props).addStates({open:i}).addVariants("direction-"+o).build();return a["default"].createElement("div",{className:n},a["default"].createElement("span",{className:u().part("message").build()},t),a["default"].createElement(l["default"],{variants:["snackbar"],className:u().part("action").build(),onClick:this.onHide},r))},t}(e.Component);exports["default"]=d,d.displayName="SnackBar",d.defaultProps={autoHideDuration:0,action:"关闭",direction:"bl"},d.propTypes={action:e.PropTypes.string,autoHideDuration:e.PropTypes.number,message:e.PropTypes.node.isRequired,openOnMount:e.PropTypes.bool,onHide:e.PropTypes.func,onShow:e.PropTypes.func,direction:e.PropTypes.oneOf(["tr","rt","rb","br","bl","lb","lt","tl","tc","rc","bc","lc"])},d.show=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"bl":arguments[2],o=document,i=o.body,n=o.createElement("div");i.appendChild(n);var l=a["default"].createElement(d,{autoHideDuration:t,message:e,direction:r,onHide:function(){setTimeout(function(){if(n)s["default"].unmountComponentAtNode(n),i.removeChild(n),i=o=n=l=null},400)}});return s["default"].render(l,n,function(){l=a["default"].cloneElement(l,{open:!0}),setTimeout(function(){s["default"].render(l,n)},0)}),l}});