/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","./table/Row","./common/util/dom","./common/util/cxBuilder","./table/Column","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("./table/Row"),require("./common/util/dom"),require("./common/util/cxBuilder"),require("./table/Column"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.Row,e.dom,e.cxBuilder,e.Column,e.babelHelpers),e.Table=r.exports}}(this,function(exports,e,t,r,o,i,n){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=n.interopRequireDefault(e),s=n.interopRequireDefault(t),l=n.interopRequireWildcard(r),u=n.interopRequireDefault(i),p=o.create("Table"),c=function(t){function r(e){n.classCallCheck(this,r);var o=n.possibleConstructorReturn(this,t.call(this,e));return o.state={columns:o.getColumns(o.props)},o.onWindowResize=o.onWindowResize.bind(o),o}return n.inherits(r,t),r.prototype.componentDidMount=function(){this.onWindowResize(),l.on(window,"resize",this.onWindowResize)},r.prototype.componentWillReceiveProps=function(e){this.setState({columns:this.getColumns(e)})},r.prototype.componentWillUnmount=function(){l.off(window,"resize",this.onWindowResize)},r.prototype.getColumns=function(t){return e.Children.toArray(t.children).reduce(function(e,t){if(null!=t){if("COLUMN"!==t.type._TABLE_COMPONENT_)throw new Error("Table child must be a TableColumn");e.push(t)}return e},[])},r.prototype.renderHeader=function(e,t){var r=this.props;return a["default"].createElement("div",{className:p().part("header").build()},a["default"].createElement(s["default"],{part:"header",height:r.headerRowHeight,columns:e,tableWidth:t}))},r.prototype.renderBody=function(e,t){var r=this,o=this.props,i=o.dataSource,n=o.noDataContent,s=i&&i.length?i.map(function(o,i){return r.renderRow(e,o,i,t)}):a["default"].createElement("div",{className:p().part("body-empty").build(),style:{width:t-2}},n);return a["default"].createElement("div",{className:p().part("body").build()},s)},r.prototype.renderRow=function(e,t,r,o){var i=this.props,n=i.rowHeight,l=i.highlight;return a["default"].createElement(s["default"],{height:n,highlight:l,key:r,rowIndex:r,part:"body",columns:e,data:t,tableWidth:o})},r.prototype.renderFooter=function(e){return null},r.prototype.onWindowResize=function(){var e=this.main;if(this.main)this.setState({width:e.offsetWidth})},r.prototype.render=function(){var e=this,t=this.state,r=t.width,o=t.columns;if(r)r=Math.max(r,o.reduce(function(e,t){return e+t.props.width},0));else r="";return a["default"].createElement("div",{className:p(this.props).build(),ref:function(t){e.main=t}},this.renderHeader(o,r),this.renderBody(o,r),this.renderFooter(o,r))},r}(e.Component);exports["default"]=c,c.displayName="Table",c.propTypes={rowHeight:e.PropTypes.number.isRequired,highlight:e.PropTypes.bool,headerRowHeight:e.PropTypes.number,dataSource:e.PropTypes.array.isRequired,noDataContent:e.PropTypes.node},c.defaultProps={highlight:!0,rowHeight:48,headerRowHeight:56,noDataContent:"没有数据"},c.Column=u["default"]});