/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","./common/util/dom","./common/util/cxBuilder","./babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("./common/util/dom"),require("./common/util/cxBuilder"),require("./babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.dom,e.cxBuilder,e.babelHelpers),e.Tooltip=r.exports}}(this,function(exports,e,t,r,i,o){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=o.interopRequireDefault(e),a=o.interopRequireDefault(t),s=o.interopRequireDefault(r),l=i.create("Tooltip"),u=function(e){function t(r){o.classCallCheck(this,t);var i=o.possibleConstructorReturn(this,e.call(this,r));return i.onClick=i.onClick.bind(i),i.onMouseEnter=i.onMouseEnter.bind(i),i.onMouseLeave=i.onMouseLeave.bind(i),i.state={isShown:!1},i}return o.inherits(t,e),t.prototype.componentDidMount=function(){var e=this.popup=t.createPopup();this.renderPopup(e,this.props.content)},t.prototype.componentWillUnmount=function(){t.destroyPopup(this.popup),this.popup=null},t.prototype.componentDidUpdate=function(){this.renderPopup(this.popup,this.props.content)},t.prototype.onClick=function(e){this.toggle()},t.prototype.onMouseEnter=function(e){this.show()},t.prototype.onMouseLeave=function(e){this.hide()},t.prototype.isShown=function(){return this.state.isShown},t.prototype.toggle=function(){this.isShown()?this.hide():this.show()},t.prototype.show=function(){this.setState({isShown:!0})},t.prototype.hide=function(){this.setState({isShown:!1})},t.prototype.getPosition=function(){var e=this.main;if(!this.isShown()||!e)return{left:-1e4,top:0,opacity:0,width:"auto",height:"auto"};var t=this.props,r=t.direction,i=t.offsetX,o=t.offsetY,n=this.popup.childNodes[0],a=s["default"].getPosition(e),l=n.offsetWidth,u=n.offsetHeight,p={opacity:1};switch(r){case"top":p.left=a.left+(a.width-l)/2,p.top=a.top-u-o;break;case"bottom":p.left=(a.width-l)/2+a.left,p.top=a.top+a.height+o;break;case"left":p.top=(a.height-u)/2+a.top,p.left=a.left-l-o;break;case"right":p.top=(a.height-u)/2+a.top,p.left=a.left+a.width+i}return p},t.prototype.renderPopup=function(e,t){a["default"].render(n["default"].createElement("div",{className:l().part("popup").build(),style:this.getPosition()},t),e)},t.prototype.render=function(){var e=this,t=this.props,r=t.mode,i=t.children,a=t.direction,s="click"===r?this.onClick:null,u="over"===r?this.onMouseEnter:null,p="over"===r?this.onMouseLeave:null;return n["default"].createElement("div",o["extends"]({},t,{ref:function(t){if(t)e.main=t},className:l(t).addStates({direction:a}).build(),onClick:s,onMouseEnter:u,onMouseLeave:p}),i)},t}(e.Component);exports["default"]=u,u.displayName="Tooltip",u.propTypes={arrow:e.PropTypes.bool.isRequired,direction:e.PropTypes.oneOf(["top","bottom","left","right"]).isRequired,mode:e.PropTypes.oneOf(["over","click"])},u.defaultProps={arrow:!0,direction:"bottom",mode:"over",offsetX:14,offsetY:14},function(){var e=void 0;u.createPopup=function(){if(!e)e=document.createElement("div"),e.className=l().part("container").build(),document.body.appendChild(e);var t=document.createElement("div");return e.appendChild(t),t},u.destroyPopup=function(t){e.removeChild(t)}}()});