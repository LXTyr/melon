/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","react-dom","../common/util/cxBuilder","./SelectorItem","../common/util/date","../common/util/array","../babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("react-dom"),require("../common/util/cxBuilder"),require("./SelectorItem"),require("../common/util/date"),require("../common/util/array"),require("../babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.reactDom,e.cxBuilder,e.SelectorItem,e.date,e.array,e.babelHelpers),e.Selector=r.exports}}(this,function(exports,e,t,r,i,o,n,a){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=a.interopRequireDefault(e),l=a.interopRequireDefault(t),u=a.interopRequireDefault(i),p=a.interopRequireWildcard(o),d=r.create("CalendarSelector"),c=function(e){function t(r){a.classCallCheck(this,t);var i=a.possibleConstructorReturn(this,e.call(this,r));return i.onClick=i.onClick.bind(i),i}return a.inherits(t,e),t.prototype.onClick=function(e){var t=this.props.onChange;if(t)t({target:this,mode:e.mode,date:e.date})},t.prototype.componentDidMount=function(){var e=this.refs.item?l["default"].findDOMNode(this.refs.item):null;e&&e.scrollIntoView&&e.scrollIntoView()},t.prototype.componentDidUpdate=function(){var e=this.refs.item?l["default"].findDOMNode(this.refs.item):null;e&&e.scrollIntoView&&e.scrollIntoView()},t.prototype.render=function(){var e=this,r=this.props,i=r.minDate,o=r.maxDate,l=r.date,c=a.objectWithoutProperties(r,["minDate","maxDate","date"]),f=[],h=l.getFullYear(),m=l.getMonth(),y=l.getDate();if(this.isMonthView())f=n.range(12).map(function(t,r){var n=new Date(h,t,y),a=p.isDate(i)&&p.isBeforeMonth(n,i)||p.isDate(o)&&p.isAfterMonth(n,o),l=t===m;return s["default"].createElement(u["default"],{key:r,mode:"month",ref:l?"item":null,date:n,onClick:e.onClick,disabled:a,selected:l})});else{var b=t.MAX_RANGE;n.range(h-b,h+b).forEach(function(t,r){if(!(p.isDate(i)&&t<i.getFullYear()||p.isDate(o)&&t>o.getFullYear())){var n=new Date(t,m,y),a=t===h;f.push(s["default"].createElement(u["default"],{key:r,mode:"year",ref:a?"item":null,date:n,onClick:e.onClick,selected:a}))}})}return s["default"].createElement("ul",a["extends"]({},c,{className:d(this.props).build()}),f)},t.prototype.isMonthView=function(){var e=this.props,t=e.minDate,r=e.maxDate,i=e.mode,o=!1;if("year"===i&&p.isDate(t)&&p.isDate(r))o=0===p.yearDiff(t,r);return"month"===i||o},t}(e.Component);exports["default"]=c,c.displayName="CalendarSelector",c.MAX_RANGE=10,c.propTypes={date:e.PropTypes.object.isRequired,maxDate:e.PropTypes.object,minDate:e.PropTypes.object,onChange:e.PropTypes.func,mode:e.PropTypes.oneOf(["month","year"])}});