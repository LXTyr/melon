/*! 2016 Baidu Inc. All Rights Reserved */
!function(e,t){if("function"==typeof define&&define.amd)define(["exports","react","../common/util/cxBuilder","./Header","./Selector","./Pager","./Month","../common/util/date","../babelHelpers"],t);else if("undefined"!=typeof exports)t(exports,require("react"),require("../common/util/cxBuilder"),require("./Header"),require("./Selector"),require("./Pager"),require("./Month"),require("../common/util/date"),require("../babelHelpers"));else{var r={exports:{}};t(r.exports,e.react,e.cxBuilder,e.Header,e.Selector,e.Pager,e.Month,e.date,e.babelHelpers),e.Panel=r.exports}}(this,function(exports,e,t,r,i,o,n,a,s){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var l=s.interopRequireDefault(e),u=s.interopRequireDefault(r),p=s.interopRequireDefault(i),d=s.interopRequireDefault(o),c=s.interopRequireDefault(n),f=s.interopRequireWildcard(a),h=t.create("CalendarPanel"),m=function(e){function t(r){s.classCallCheck(this,t);var i=s.possibleConstructorReturn(this,e.call(this,r));return i.onHeaderClick=i.onHeaderClick.bind(i),i.onSelectorChange=i.onSelectorChange.bind(i),i.onPagerChange=i.onPagerChange.bind(i),i.onDateChange=i.onDateChange.bind(i),i.state={selectorType:"main",month:r.date},i}return s.inherits(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.date;if(this.props.date!==t)this.setState({date:t})},t.prototype.onHeaderClick=function(e){var t=this.state.selectorType;this.setState({selectorType:"main"===t?"year":"main"})},t.prototype.onSelectorChange=function(e){var t=e.mode,r=e.date,i=this.props,o=i.end,n=i.begin;if(t="year"===t?"month":"main",n&&f.isBeforeDate(r,n))r=n;else if(o&&f.isAfterDate(r,o))r=o;this.setState({date:r,month:r,selectorType:t})},t.prototype.onPagerChange=function(e){var t=e.month;this.setState({month:t})},t.prototype.onDateChange=function(e){this.props.onChange({value:e.date})},t.prototype.render=function(){var e=this.props,t=e.date,r=e.lang,i=e.begin,o=e.end,n=this.state,a=n.selectorType,s=n.month;return l["default"].createElement("div",{className:h(this.props).build()},l["default"].createElement(u["default"],{date:t,onClick:this.onHeaderClick}),l["default"].createElement("div",{className:h().part("main").build()},l["default"].createElement(d["default"],{minDate:i,maxDate:o,onChange:this.onPagerChange,month:s}),l["default"].createElement(c["default"],{minDate:i,maxDate:o,lang:r,month:s,date:t,onChange:this.onDateChange}),l["default"].createElement(p["default"],{style:{display:"main"===a?"none":null},date:t,mode:"year"===a?"year":"month",minDate:i,maxDate:o,onChange:this.onSelectorChange})))},t}(e.Component);exports["default"]=m,m.displayName="CalendarPanel",m.defaultProps={date:new Date},m.propTypes={date:e.PropTypes.instanceOf(Date),begin:e.PropTypes.instanceOf(Date),end:e.PropTypes.instanceOf(Date)}});