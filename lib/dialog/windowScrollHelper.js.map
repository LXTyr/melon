{"version":3,"sources":["dialog/windowScrollHelper.js"],"names":["stop","restore","update","originalHTMLBodySize","stopWindowScrolling","name","element","document","getElementsByTagName","lockNum","getAttribute","parseInt","setAttribute","width","style","height","overflow","restoreWindowScrolling","removeAttribute","size","body","html"],"mappings":";;;;;;;;;;;;;;;;YA2DgBA,I,GAAAA,I;YAKAC,O,GAAAA,O;YAQAC,M,GAAAA,M;AAxEhB;;;;;AAKA,QAAMC,uBAAuB,EAA7B;;AAEA;;AAEA,aAASC,mBAAT,CAA6BC,IAA7B,EAAmC;;AAE/B,YAAMC,UAAUC,SAASC,oBAAT,CAA8BH,IAA9B,EAAoC,CAApC,CAAhB;;AAEA,YAAII,UAAUH,QAAQI,YAAR,CAAqB,WAArB,KAAqC,GAAnD;AACAD,kBAAUE,SAASF,OAAT,EAAkB,EAAlB,CAAV;;AAEAH,gBAAQM,YAAR,CAAqB,WAArB,EAAkCH,UAAU,CAA5C;;AAEA,YAAIA,YAAY,CAAhB,EAAmB;AACfN,iCAAqBE,IAArB,IAA6B;AACzBQ,uBAAOP,QAAQQ,KAAR,CAAcD,KADI;AAEzBE,wBAAQT,QAAQQ,KAAR,CAAcC,MAFG;AAGzBC,0BAAUV,QAAQQ,KAAR,CAAcE;AAHC,aAA7B;AAKAV,oBAAQQ,KAAR,CAAcD,KAAd,GAAsB,MAAtB;AACAP,oBAAQQ,KAAR,CAAcC,MAAd,GAAuB,MAAvB;;AAEA,gBAAIV,SAAS,MAAb,EAAqB;AACjBC,wBAAQQ,KAAR,CAAcE,QAAd,GAAyB,QAAzB;AACH;AACJ;;AAED,eAAOV,OAAP;AACH;;AAED,aAASW,sBAAT,CAAgCZ,IAAhC,EAAsC;;AAElC,YAAMC,UAAUC,SAASC,oBAAT,CAA8BH,IAA9B,EAAoC,CAApC,CAAhB;AACA,YAAII,UAAUH,QAAQI,YAAR,CAAqB,WAArB,KAAqC,GAAnD;AACAD,kBAAUE,SAASF,OAAT,EAAkB,EAAlB,CAAV;;AAEA,YAAIA,UAAU,CAAd,EAAiB;AACbH,oBAAQM,YAAR,CAAqB,WAArB,EAAkCH,UAAU,CAA5C;AACH,SAFD,MAGK;AACDH,oBAAQY,eAAR,CAAwB,WAAxB;AACA,gBAAMC,OAAOhB,qBAAqBE,IAArB,CAAb;AACAC,oBAAQQ,KAAR,CAAcD,KAAd,GAAsBM,KAAKN,KAA3B;AACAP,oBAAQQ,KAAR,CAAcC,MAAd,GAAuBI,KAAKJ,MAA5B;;AAEA,gBAAIV,SAAS,MAAb,EAAqB;AACjBC,wBAAQQ,KAAR,CAAcE,QAAd,GAAyBG,KAAKH,QAA9B;AACH;AACD,mBAAOb,qBAAqBE,IAArB,CAAP;AACH;;AAED,eAAOC,OAAP;AACH;;AAEM,aAASN,IAAT,GAAgB;AACnBI,4BAAoB,MAApB;AACAA,4BAAoB,MAApB;AACH;;AAEM,aAASH,OAAT,GAAmB;AACtB,YAAI,CAACE,qBAAqBiB,IAAtB,IAA8B,CAACjB,qBAAqBkB,IAAxD,EAA8D;AAC1D;AACH;AACDJ,+BAAuB,MAAvB;AACAA,+BAAuB,MAAvB;AACH;;AAEM,aAASf,MAAT,GAAkB;AACrBF;AACAC;AACH","file":"windowScrollHelper.js","sourcesContent":["/**\n * @file melon/dialog/windowScrollHelper\n * @author leon(ludafa@outlook.com)\n */\n\nconst originalHTMLBodySize = {};\n\n/* eslint-disable fecs-valid-dom-style */\n\nfunction stopWindowScrolling(name) {\n\n    const element = document.getElementsByTagName(name)[0];\n\n    let lockNum = element.getAttribute('data-lock') || '0';\n    lockNum = parseInt(lockNum, 10);\n\n    element.setAttribute('data-lock', lockNum + 1);\n\n    if (lockNum === 0) {\n        originalHTMLBodySize[name] = {\n            width: element.style.width,\n            height: element.style.height,\n            overflow: element.style.overflow\n        };\n        element.style.width = '100%';\n        element.style.height = '100%';\n\n        if (name !== 'html') {\n            element.style.overflow = 'hidden';\n        }\n    }\n\n    return element;\n}\n\nfunction restoreWindowScrolling(name) {\n\n    const element = document.getElementsByTagName(name)[0];\n    let lockNum = element.getAttribute('data-lock') || '0';\n    lockNum = parseInt(lockNum, 10);\n\n    if (lockNum > 1) {\n        element.setAttribute('data-lock', lockNum - 1);\n    }\n    else {\n        element.removeAttribute('data-lock');\n        const size = originalHTMLBodySize[name];\n        element.style.width = size.width;\n        element.style.height = size.height;\n\n        if (name !== 'html') {\n            element.style.overflow = size.overflow;\n        }\n        delete originalHTMLBodySize[name];\n    }\n\n    return element;\n}\n\nexport function stop() {\n    stopWindowScrolling('body');\n    stopWindowScrolling('html');\n}\n\nexport function restore() {\n    if (!originalHTMLBodySize.body || !originalHTMLBodySize.html) {\n        return;\n    }\n    restoreWindowScrolling('body');\n    restoreWindowScrolling('html');\n}\n\nexport function update() {\n    stop();\n    restore();\n}\n"]}