{"version":3,"sources":["table/Row.js"],"names":["cx","TableRow","shouldComponentUpdate","nextProps","nextState","props","tableWidth","rowHasChanged","data","columns","nextColumns","length","some","column","i","renderCell","columnData","index","part","height","rowIndex","dataKey","cellRenderer","cellData","cellProps","key","columnIndex","rowData","cellKey","content","partSpecificRenderer","render","build","map","displayName","propTypes","number","oneOf","isRequired","oneOfType","object","array","func"],"mappings":"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","file":"Row.js","sourcesContent":["/**\n * @file melon/TableRow\n * @author leon(ludafa@outlook.com)\n */\n\nimport React, {Component, PropTypes} from 'react';\nimport {create} from 'melon-core/classname/cxBuilder';\nimport TableCell from './Cell';\nimport shallowEqual from 'melon-core/util/shallowEqual';\n\nconst cx = create('TableRow');\n\n/**\n * 表格行\n *\n * @extends React.Component\n */\nexport default class TableRow extends Component {\n\n    /**\n     * 是否应该更新视图\n     *\n     * @public\n     * @param  {*} nextProps 下一个属性\n     * @param  {*} nextState 下一个状态\n     * @return {boolean}\n     */\n    shouldComponentUpdate(nextProps, nextState) {\n\n        const {\n            tableWidth,\n            rowHasChanged,\n            data\n        } = this.props;\n\n        if (tableWidth !== nextProps.tableWidth) {\n            return true;\n        }\n\n        let columns = this.props.columns;\n        let nextColumns = nextProps.columns;\n\n        // 列设置是否发生了变化\n        if (\n            columns.length !== nextColumns\n            || columns.some((column, i) => !shallowEqual(column.props, nextColumns[i].props))\n        ) {\n            return true;\n        }\n\n        // 行数据是否发生了变化\n        if (rowHasChanged) {\n            return rowHasChanged(data, nextProps.data);\n        }\n\n        return true;\n\n    }\n\n    /**\n     * 渲染表格单元格\n     *\n     * @protected\n     * @param {*} props 属性\n     * @param {*} columnData 列配置\n     * @param {*} index 行号\n     * @return {React.Element}\n     */\n    renderCell(props, columnData, index) {\n\n        const {\n            part,\n            data,\n            height,\n            rowIndex\n        } = props;\n\n        const {\n            dataKey,\n            cellRenderer\n        } = columnData;\n\n        const cellData = part === 'header' || part === 'footer'\n            ? columnData[part]\n            : data[dataKey];\n\n        const cellProps = {\n            part,\n            height,\n            rowIndex,\n            columnData,\n            cellData,\n            key: dataKey || part,\n            columnIndex: index,\n            rowData: data,\n            cellKey: dataKey\n        };\n\n        // 内容默认是 cellData\n        let content = cellData;\n\n        // 如果有 cellRenderer\n        if (typeof cellRenderer === 'function') {\n            content = cellRenderer(cellProps);\n        }\n        // 或者是有局部的 renderer\n        else {\n\n            const partSpecificRenderer = columnData[`${part}Renderer`];\n\n            if (typeof partSpecificRenderer === 'function') {\n                content = partSpecificRenderer(cellProps);\n            }\n\n        }\n\n        return (\n            <TableCell {...cellProps} content={content} />\n        );\n\n    }\n\n    /**\n     * 渲染\n     *\n     * @public\n     * @return {Element}\n     */\n    render() {\n\n        const columns = this.props.columns;\n\n        return (\n            <div className={cx(this.props).build()}>\n                {columns.map(\n                    (column, index) => this.renderCell(\n                        this.props,\n                        column.props,\n                        index\n                    )\n                )}\n            </div>\n        );\n\n    }\n\n\n}\n\nTableRow.displayName = 'TableRow';\n\nTableRow.propTypes = {\n\n    index: PropTypes.number,\n\n    /**\n     * 行类型\n     *\n     * @type {string}\n     */\n    part: PropTypes.oneOf(['header', 'footer', 'body']).isRequired,\n\n    /**\n     * 行数据\n     *\n     * @type {(Object | array)}\n     */\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n\n    /**\n     * Height of the row.\n     * @type {number}\n     */\n    height: PropTypes.number.isRequired,\n\n    /**\n     * 行数据是否发生变化\n     *\n     * 此函数会被用于优化性能。如果返回值为 false，那么当前行不会被更新\n     *\n     * @type {Funciton}\n     */\n    rowHasChanged: PropTypes.func.isRequired\n};\n"]}