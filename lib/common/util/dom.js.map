{"version":3,"sources":["common/util/dom.js"],"names":["exports","on","target","eventName","handler","addEventListener","attachEvent","off","removeEventListener","detachEvent","contains","container","contained","parentNode","getCompatElement","el","doc","ownerDocument","document","compatMode","documentElement","body","getScrollLeft","window","pageXOffset","scrollLeft","getScrollTop","pageYOffset","scrollTop","getClientHeight","clientHeight","getClientWidth","clientWidth","getPosition","element","bound","getBoundingClientRect","root","clientTop","clientLeft","left","parseFloat","top","width","height","hasClass","cls","className","match","RegExp","addClass","removeClass","reg","replace"],"mappings":"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","file":"dom.js","sourcesContent":["/**\n * @file melon dom 相关的小工具\n * @author leon(ludafa@outlook.com)\n */\n\nexports.on = function (target, eventName, handler) {\n    if (target.addEventListener) {\n        target.addEventListener(eventName, handler);\n    }\n    else {\n        target.attachEvent('on' + eventName, handler);\n    }\n};\n\nexports.off = function (target, eventName, handler) {\n\n    if (target.removeEventListener) {\n        target.removeEventListener(eventName, handler);\n    }\n    else {\n        target.detachEvent('on' + eventName, handler);\n    }\n\n};\n\nexports.contains = function (container, contained) {\n    if (container.contains) {\n        return container.contains(contained);\n    }\n    while ((contained = contained.parentNode)) {\n        if (contained === container) {\n            return true;\n        }\n    }\n    return false;\n};\n\n/**\n * 获取文档的兼容根节点\n *\n * @inner\n * @param {?HTMLElement=} el 节点引用，跨 frame 时需要\n * @return {HTMLElement} 兼容的有效根节点\n */\nfunction getCompatElement(el) {\n    var doc = el && el.ownerDocument || document;\n    var compatMode = doc.compatMode;\n    return !compatMode || compatMode === 'CSS1Compat'\n        ? doc.documentElement\n        : doc.body;\n}\n\nexports.getScrollLeft = function () {\n    return window.pageXOffset || getCompatElement().scrollLeft;\n};\n\nexports.getScrollTop = function () {\n    return window.pageYOffset || getCompatElement().scrollTop;\n};\n\nexports.getClientHeight = function () {\n    return getCompatElement().clientHeight;\n};\n\nexports.getClientWidth = function () {\n    return getCompatElement().clientWidth;\n};\n\nexports.getPosition = function (element) {\n\n    var bound = element.getBoundingClientRect();\n\n    var root = document.documentElement;\n    var body = document.body;\n\n    var clientTop = root.clientTop || body.clientTop || 0;\n    var clientLeft = root.clientLeft || body.clientLeft || 0;\n    var scrollTop = window.pageYOffset || root.scrollTop;\n    var scrollLeft = window.pageXOffset || root.scrollLeft;\n\n    return {\n        left: parseFloat(bound.left) + scrollLeft - clientLeft,\n        top: parseFloat(bound.top) + scrollTop - clientTop,\n        width: bound.width,\n        height: bound.height\n    };\n\n};\n\nexports.hasClass = function (element, cls) {\n    return element.className.match(new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)'));\n};\n\nexports.addClass = function (element, cls) {\n    if (!this.hasClass(element, cls)) {\n        element.className += ' ' + cls;\n    }\n};\n\nexports.removeClass = function (element, cls) {\n    if (this.hasClass(element, cls)) {\n        var reg = new RegExp('(\\\\s|^)' + cls + '(\\\\s|$)');\n        element.className = element.className.replace(reg, ' ');\n    }\n};\n"]}